<!DOCTYPE html>
<html>
<head>
  <title>{{personal.firstName}} {{personal.lastName}} - CV</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Roboto', 'Arial', sans-serif;
    }
    
    body {
      background: #fff;
      color: #333;
      font-size: 11px;
      line-height: 1.6;
    }
    
    .container {
      max-width: 210mm;
      margin: 0 auto;
      display: grid;
      grid-template-columns: {{#if preferences.includePhoto}}1fr 3fr{{else}}1fr{{/if}};
      background: #fff;
    }
    
    .sidebar {
      background-color: {{#if preferences.accentColor}}{{preferences.accentColor}}{{else}}#2563eb{{/if}};
      color: white;
      padding: 30px 20px;
    }
    
    .main-content {
      padding: 30px;
    }
    
    .photo-container {
      text-align: center;
      margin-bottom: 20px;
    }
    
    .photo {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      overflow: hidden;
      margin: 0 auto;
      border: 3px solid white;
    }
    
    .photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    h1 {
      font-size: 24px;
      margin-bottom: 5px;
      color: {{#if preferences.accentColor}}{{preferences.accentColor}}{{else}}#2563eb{{/if}};
    }
    
    .sidebar h1 {
      color: white;
      text-align: center;
    }
    
    h2 {
      color: {{#if preferences.accentColor}}{{preferences.accentColor}}{{else}}#2563eb{{/if}};
      font-size: 16px;
      font-weight: 600;
      margin: 20px 0 10px 0;
      padding-bottom: 5px;
      position: relative;
    }
    
    h2::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 40px;
      height: 2px;
      background-color: {{#if preferences.accentColor}}{{preferences.accentColor}}{{else}}#2563eb{{/if}};
    }
    
    .sidebar h2 {
      color: white;
      text-align: center;
      border-bottom: none;
    }
    
    .sidebar h2::after {
      left: 50%;
      transform: translateX(-50%);
      background-color: white;
    }
    
    h3 {
      color: #555;
      font-size: 14px;
      margin-bottom: 5px;
    }
    
    .contact-info {
      margin-top: 20px;
    }
    
    .contact-item {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .contact-icon {
      margin-right: 10px;
      width: 20px;
      text-align: center;
    }
    
    .section {
      margin-bottom: 20px;
    }
    
    .section-content {
      margin-top: 15px;
    }
    
    .item {
      margin-bottom: 15px;
      position: relative;
    }
    
    .item-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 5px;
    }
    
    .item-title {
      font-weight: bold;
      color: #444;
    }
    
    .item-subtitle {
      font-style: italic;
      color: #666;
    }
    
    .item-date {
      color: #888;
      font-size: 10px;
    }
    
    .item-description {
      font-size: 11px;
      text-align: justify;
    }
    
    .skills-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }
    
    .skill-tag {
      background-color: rgba(255, 255, 255, 0.2);
      border-radius: 15px;
      padding: 3px 10px;
      font-size: 10px;
    }
    
    .main-content .skill-tag {
      background-color: #f1f5f9;
      color: {{#if preferences.accentColor}}{{preferences.accentColor}}{{else}}#2563eb{{/if}};
    }
    
    .language-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
    }
    
    .progress-bar {
      width: 100%;
      height: 5px;
      background-color: rgba(255, 255, 255, 0.2);
      margin-top: 2px;
      border-radius: 3px;
      overflow: hidden;
    }
    
    .progress-bar-fill {
      height: 100%;
      background-color: white;
    }
    
    .summary {
      border-left: 2px solid {{#if preferences.accentColor}}{{preferences.accentColor}}{{else}}#2563eb{{/if}};
      padding-left: 15px;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    {{#if preferences.includePhoto}}
    <div class="sidebar">
      {{#if personal.photoUrl}}
      <div class="photo-container">
        <div class="photo">
          <img src="{{personal.photoUrl}}" alt="{{personal.firstName}} {{personal.lastName}}">
        </div>
      </div>
      {{/if}}
      
      <h1>{{personal.firstName}}<br>{{personal.lastName}}</h1>
      
      <div class="contact-info">
        <div class="contact-item">
          <div class="contact-icon">ðŸ“§</div>
          {{personal.email}}
        </div>
        <div class="contact-item">
          <div class="contact-icon">ðŸ“±</div>
          {{personal.phone}}
        </div>
        {{#if personal.linkedin}}
        <div class="contact-item">
          <div class="contact-icon">ðŸ”—</div>
          linkedin.com/in/{{personal.linkedin}}
        </div>
        {{/if}}
      </div>
      
      {{#if languages.length}}
      <h2>Languages</h2>
      <div class="section-content">
        {{#each languages}}
        <div class="language-item">
          <div>{{name}}</div>
          <div>{{proficiency}}</div>
        </div>
        {{/each}}
      </div>
      {{/if}}
      
      {{#if additional.skills.length}}
      <h2>Additional Skills</h2>
      <div class="section-content">
        <div class="skills-list">
          {{#each additional.skills}}
          <div class="skill-tag">{{this}}</div>
          {{/each}}
        </div>
      </div>
      {{/if}}
    </div>
    {{/if}}
    
    <div class="main-content">
      {{#unless preferences.includePhoto}}
      <h1>{{personal.firstName}} {{personal.lastName}}</h1>
      
      <div class="contact-info">
        <div class="contact-item">
          <div class="contact-icon">ðŸ“§</div>
          {{personal.email}}
        </div>
        <div class="contact-item">
          <div class="contact-icon">ðŸ“±</div>
          {{personal.phone}}
        </div>
        {{#if personal.linkedin}}
        <div class="contact-item">
          <div class="contact-icon">ðŸ”—</div>
          linkedin.com/in/{{personal.linkedin}}
        </div>
        {{/if}}
      </div>
      {{/unless}}
      
      <div class="summary">
        <p>{{professional.summary}}</p>
      </div>

      {{#if competencies.technicalSkills.length}}
      <div class="section">
        <h2>Key Competencies</h2>
        <div class="section-content">
          <div class="skills-list">
            {{#each competencies.technicalSkills}}
            <div class="skill-tag">{{this}}</div>
            {{/each}}
          </div>
        </div>
      </div>
      {{/if}}
      
      {{#each sectionOrder}}
        {{#if (eq this "experience")}}
          {{#if ../experience.length}}
          <div class="section">
            <h2>Work Experience</h2>
            <div class="section-content">
              {{#each ../experience}}
              <div class="item">
                <div class="item-header">
                  <div>
                    <div class="item-title">{{jobTitle}}</div>
                    <div class="item-subtitle">{{companyName}}</div>
                  </div>
                  <div class="item-date">
                    {{startDate}} - {{#if isCurrent}}Present{{else}}{{endDate}}{{/if}}
                  </div>
                </div>
                <div class="item-description">
                  {{responsibilities}}
                </div>
              </div>
              {{/each}}
            </div>
          </div>
          {{/if}}
        {{/if}}
        
        {{#if (eq this "education")}}
          {{#if ../education.length}}
          <div class="section">
            <h2>Education</h2>
            <div class="section-content">
              {{#each ../education}}
              <div class="item">
                <div class="item-header">
                  <div>
                    <div class="item-title">{{major}}</div>
                    <div class="item-subtitle">{{schoolName}}</div>
                  </div>
                  <div class="item-date">
                    {{startDate}} - {{endDate}}
                  </div>
                </div>
                {{#if achievements}}
                <div class="item-description">
                  {{achievements}}
                </div>
                {{/if}}
              </div>
              {{/each}}
            </div>
          </div>
          {{/if}}
        {{/if}}
        
        {{#if (eq this "certificates")}}
          {{#if ../certificates.length}}
          <div class="section">
            <h2>Certificates</h2>
            <div class="section-content">
              {{#each ../certificates}}
              <div class="item">
                <div class="item-header">
                  <div>
                    <div class="item-title">{{name}}</div>
                    <div class="item-subtitle">{{institution}}</div>
                  </div>
                  <div class="item-date">
                    {{dateAcquired}}{{#if expirationDate}} - {{expirationDate}}{{/if}}
                  </div>
                </div>
                {{#if achievements}}
                <div class="item-description">
                  {{achievements}}
                </div>
                {{/if}}
              </div>
              {{/each}}
            </div>
          </div>
          {{/if}}
        {{/if}}
        
        {{#if (eq this "extracurricular")}}
          {{#if ../extracurricular.length}}
          <div class="section">
            <h2>Extracurricular Activities</h2>
            <div class="section-content">
              {{#each ../extracurricular}}
              <div class="item">
                <div class="item-header">
                  <div>
                    <div class="item-title">{{role}}</div>
                    <div class="item-subtitle">{{organization}}</div>
                  </div>
                  <div class="item-date">
                    {{startDate}} - {{#if isCurrent}}Present{{else}}{{endDate}}{{/if}}
                  </div>
                </div>
                <div class="item-description">
                  {{description}}
                </div>
              </div>
              {{/each}}
            </div>
          </div>
          {{/if}}
        {{/if}}
      {{/each}}
      
      {{#unless preferences.includePhoto}}
        {{#if languages.length}}
        <div class="section">
          <h2>Languages</h2>
          <div class="section-content">
            {{#each languages}}
            <div class="language-item">
              <div>{{name}}</div>
              <div>{{proficiency}}</div>
            </div>
            {{/each}}
          </div>
        </div>
        {{/if}}
        
        {{#if additional.skills.length}}
        <div class="section">
          <h2>Additional Skills</h2>
          <div class="section-content">
            <div class="skills-list">
              {{#each additional.skills}}
              <div class="skill-tag">{{this}}</div>
              {{/each}}
            </div>
          </div>
        </div>
        {{/if}}
      {{/unless}}
    </div>
  </div>
</body>
</html>